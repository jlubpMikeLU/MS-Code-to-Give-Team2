(()=>{"use strict";var n={56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:n=>{var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var a={},s=[],i=0;i<n.length;i++){var d=n[i],c=o.base?d[0]+o.base:d[0],l=a[c]||0,m="".concat(c," ").concat(l);a[c]=l+1;var g=t(m),p={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==g)e[g].references++,e[g].updater(p);else{var u=r(p,o);o.byIndex=i,e.splice(i,0,{identifier:m,updater:u,references:1})}s.push(m)}return s}function r(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,r){var a=o(n=n||[],r=r||{});return function(n){n=n||[];for(var s=0;s<a.length;s++){var i=t(a[s]);e[i].references--}for(var d=o(n,r),c=0;c<a.length;c++){var l=t(a[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}a=d}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},e.i=function(n,t,o,r,a){"string"==typeof n&&(n=[[null,n,void 0]]);var s={};if(o)for(var i=0;i<this.length;i++){var d=this[i][0];null!=d&&(s[d]=!0)}for(var c=0;c<n.length;c++){var l=[].concat(n[c]);o&&s[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),e.push(l))}},e}},365:(n,e,t)=>{t.d(e,{A:()=>i});var o=t(601),r=t.n(o),a=t(314),s=t.n(a)()(r());s.push([n.id,"/* Reset and Base Styles */\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nbody {\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    background-color: #f8fafc;\n    color: #1e293b;\n    line-height: 1.6;\n}\n\n/* Header Styles */\n.header {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    padding: 1rem 0;\n    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n    position: sticky;\n    top: 0;\n    z-index: 100;\n}\n\n.header-content {\n    max-width: 1400px;\n    margin: 0 auto;\n    padding: 0 2rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.logo {\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n}\n\n.logo i {\n    font-size: 2rem;\n    color: #fbbf24;\n}\n\n.logo h1 {\n    font-size: 1.75rem;\n    font-weight: 700;\n}\n\n.header-actions {\n    display: flex;\n    gap: 1rem;\n}\n\n/* Button Styles */\n.btn {\n    padding: 0.75rem 1.5rem;\n    border: none;\n    border-radius: 8px;\n    font-size: 0.875rem;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    display: inline-flex;\n    align-items: center;\n    gap: 0.5rem;\n    text-decoration: none;\n}\n\n.btn-primary {\n    background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n    color: white;\n    box-shadow: 0 4px 6px -1px rgba(16, 185, 129, 0.3);\n}\n\n.btn-primary:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 8px 15px -3px rgba(16, 185, 129, 0.4);\n}\n\n.btn-secondary {\n    background: #e2e8f0;\n    color: #475569;\n}\n\n.btn-secondary:hover {\n    background: #cbd5e1;\n}\n\n.btn-sm {\n    padding: 0.5rem 1rem;\n    font-size: 0.75rem;\n}\n\n/* Main Content */\n.main-content {\n    max-width: 1400px;\n    margin: 0 auto;\n    padding: 2rem;\n}\n\n/* Section Styles */\n.section-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1.5rem;\n    padding-bottom: 1rem;\n    border-bottom: 2px solid #e2e8f0;\n}\n\n.section-header h2 {\n    font-size: 1.5rem;\n    font-weight: 600;\n    color: #1e293b;\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n}\n\n.section-header h2 i {\n    color: #667eea;\n}\n\n/* Insights Section */\n.insights-actions {\n    display: flex;\n    gap: 1rem;\n    align-items: center;\n}\n\n.trends-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n    gap: 1.5rem;\n    margin-bottom: 2rem;\n}\n\n.trend-card {\n    background: white;\n    border-radius: 12px;\n    padding: 20px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    border: 1px solid #e2e8f0;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    min-height: 200px;\n}\n\n.trend-card h5 {\n    margin: 0 0 15px 0;\n    color: #374151;\n    font-size: 16px;\n    font-weight: 600;\n    text-align: center;\n}\n\n.trend-card canvas {\n    max-width: 100%;\n    height: auto;\n    display: block;\n    margin: 0 auto;\n}\n\n.insights-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n    gap: 1.5rem;\n    margin-bottom: 2rem;\n}\n\n.insight-card {\n    background: white;\n    border-radius: 12px;\n    padding: 1.5rem;\n    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n    border: 1px solid #e2e8f0;\n    transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.insight-card:hover {\n    transform: translateY(-4px);\n    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);\n}\n\n.insight-card h3 {\n    font-size: 1.125rem;\n    font-weight: 600;\n    margin-bottom: 1rem;\n    color: #374151;\n}\n\n.attention-card {\n    border-left: 4px solid #ef4444;\n}\n\n.focus-card {\n    border-left: 4px solid #f59e0b;\n}\n\n.focus-card .focus-content {\n    margin-bottom: 1rem;\n}\n\n.focus-recommendation {\n    background: #f8fafc;\n    border: 1px solid #e2e8f0;\n    border-radius: 8px;\n    padding: 1rem;\n    margin-bottom: 1rem;\n}\n\n.focus-recommendation p {\n    color: #374151;\n    margin: 0;\n    font-size: 16px;\n    font-weight: 500;\n}\n\n.focus-label {\n    color: #374151;\n    font-weight: 500;\n}\n\n.focus-area-name {\n    color: #f59e0b;\n    font-weight: 700;\n    font-size: 18px;\n}\n\n.focus-score {\n    color: #6b7280;\n    font-weight: 500;\n}\n\n.learning-areas-chart {\n    min-height: 300px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: #f8fafc;\n    border-radius: 8px;\n    padding: 1rem;\n}\n\n.correlation-section {\n    margin-top: 2rem;\n}\n\n.correlation-card {\n    background: white;\n    border-radius: 12px;\n    padding: 1.5rem;\n    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n    border: 1px solid #e2e8f0;\n}\n\n.correlation-card h3 {\n    font-size: 1.125rem;\n    font-weight: 600;\n    margin-bottom: 1rem;\n    color: #374151;\n}\n\n.correlation-metrics {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    gap: 30px;\n    margin-top: 20px;\n}\n\n.metric {\n    text-align: center;\n    flex: 1;\n}\n\n.metric:last-child {\n    flex: 3; /* Give much more space to the chart */\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.metric-value {\n    font-size: 2.5rem;\n    font-weight: bold;\n    color: #10b981;\n    margin-bottom: 8px;\n}\n\n.metric-label {\n    font-size: 0.9rem;\n    color: #64748b;\n    font-weight: 500;\n}\n\n.correlation-description {\n    background: #dbeafe;\n    padding: 1rem;\n    border-radius: 8px;\n    color: #1e40af;\n    font-size: 0.875rem;\n    line-height: 1.5;\n}\n\n/* Charts Section */\n.charts-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n    gap: 1.5rem;\n    margin-bottom: 3rem;\n}\n\n.chart-card {\n    background: white;\n    border-radius: 12px;\n    padding: 1.5rem;\n    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n    border: 1px solid #e2e8f0;\n}\n\n.chart-card.full-width {\n    grid-column: 1 / -1;\n}\n\n.chart-card h3 {\n    font-size: 1.125rem;\n    font-weight: 600;\n    margin-bottom: 1rem;\n    color: #374151;\n    text-align: center;\n}\n\n/* Students Table Section */\n.table-controls {\n    display: flex;\n    gap: 1rem;\n    align-items: center;\n}\n\n.search-input, .filter-select {\n    padding: 0.5rem 0.75rem;\n    border: 1px solid #d1d5db;\n    border-radius: 6px;\n    font-size: 0.875rem;\n    background: white;\n}\n\n.search-input:focus, .filter-select:focus {\n    outline: none;\n    border-color: #667eea;\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n.table-container {\n    background: white;\n    border-radius: 12px;\n    overflow: hidden;\n    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n    border: 1px solid #e2e8f0;\n}\n\n.students-table {\n    width: 100%;\n    border-collapse: collapse;\n}\n\n.students-table th {\n    background: #f8fafc;\n    padding: 1rem;\n    text-align: left;\n    font-weight: 600;\n    color: #374151;\n    border-bottom: 1px solid #e2e8f0;\n}\n\n.students-table td {\n    padding: 1rem;\n    border-bottom: 1px solid #f1f5f9;\n}\n\n.students-table tr:hover {\n    background: #f8fafc;\n}\n\n.student-name {\n    font-weight: 500;\n    color: #1e293b;\n}\n\n.kindergarten {\n    color: #64748b;\n    font-size: 0.875rem;\n}\n\n.score {\n    font-weight: 600;\n    color: #059669;\n}\n\n.score.low {\n    color: #dc2626;\n}\n\n.score.medium {\n    color: #d97706;\n}\n\n.learning-areas {\n    display: flex;\n    flex-direction: column;\n    gap: 0.25rem;\n}\n\n.area-score {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 0.75rem;\n}\n\n.area-name {\n    color: #64748b;\n}\n\n.area-value {\n    font-weight: 500;\n}\n\n.actions {\n    display: flex;\n    gap: 0.5rem;\n}\n\n/* Homework Section */\n.homework-grid {\n    display: block; /* Changed from grid to block for scrollable container */\n}\n\n.homework-scroll-container {\n    /* Let content expand naturally inside our host app (no internal scrolling) */\n    max-height: none;\n    overflow: visible;\n    padding-right: 0;\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));\n    gap: 1.5rem;\n}\n\n/* Custom scrollbar styling */\n.homework-scroll-container::-webkit-scrollbar {\n    width: 8px;\n}\n\n.homework-scroll-container::-webkit-scrollbar-track {\n    background: #f1f5f9;\n    border-radius: 4px;\n}\n\n.homework-scroll-container::-webkit-scrollbar-thumb {\n    background: #cbd5e1;\n    border-radius: 4px;\n}\n\n.homework-scroll-container::-webkit-scrollbar-thumb:hover {\n    background: #94a3b8;\n}\n\n.student-homework-card {\n    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);\n    border: 2px solid #cbd5e1;\n    border-radius: 12px;\n    padding: 1.5rem;\n    transition: all 0.3s ease;\n}\n\n.student-homework-card:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n    border-color: #3b82f6;\n}\n\n.homework-recent-submissions {\n    margin: 1rem 0;\n    padding: 1rem;\n    background: rgba(255, 255, 255, 0.7);\n    border-radius: 8px;\n    border: 1px solid #e2e8f0;\n}\n\n.homework-recent-submissions h4 {\n    margin: 0 0 0.75rem 0;\n    color: #374151;\n    font-size: 0.9rem;\n    font-weight: 600;\n}\n\n.recent-submission {\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n    padding: 0.5rem;\n    margin-bottom: 0.5rem;\n    background: white;\n    border-radius: 6px;\n    border: 1px solid #f1f5f9;\n    font-size: 0.85rem;\n}\n\n.recent-submission:last-child {\n    margin-bottom: 0;\n}\n\n.recent-submission .submission-type {\n    flex-shrink: 0;\n    padding: 0.25rem 0.5rem;\n    border-radius: 4px;\n    font-weight: 600;\n    font-size: 0.75rem;\n    text-transform: uppercase;\n}\n\n.recent-submission .submission-content {\n    flex: 1;\n    color: #4b5563;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n\n.recent-submission .submission-score {\n    flex-shrink: 0;\n    font-weight: 600;\n    color: #059669;\n}\n\n.no-submissions {\n    color: #9ca3af;\n    font-style: italic;\n    font-size: 0.85rem;\n}\n\n.homework-kindergarten {\n    color: #64748b;\n    font-size: 0.875rem;\n    margin-top: 0.25rem;\n}\n\n.homework-type-counts {\n    display: flex;\n    gap: 0.5rem;\n    flex-wrap: wrap;\n}\n\n.type-count {\n    padding: 0.25rem 0.75rem;\n    border-radius: 20px;\n    font-size: 0.75rem;\n    font-weight: 500;\n    text-transform: uppercase;\n}\n\n.type-count.text {\n    background: #dbeafe;\n    color: #1e40af;\n}\n\n.type-count.audio {\n    background: #fef3c7;\n    color: #92400e;\n}\n\n.type-count.video {\n    background: #f3e8ff;\n    color: #7c3aed;\n}\n\n.homework-summary {\n    background: white;\n    padding: 1rem;\n    border-radius: 8px;\n    margin: 1rem 0;\n    border: 1px solid #e2e8f0;\n}\n\n.homework-summary p {\n    margin: 0.5rem 0;\n    color: #374151;\n}\n\n.homework-card {\n    background: white;\n    border-radius: 12px;\n    padding: 1.5rem;\n    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n    border: 1px solid #e2e8f0;\n    transition: transform 0.2s ease;\n}\n\n.homework-card:hover {\n    transform: translateY(-2px);\n}\n\n.homework-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin-bottom: 1rem;\n}\n\n.homework-type {\n    padding: 0.25rem 0.75rem;\n    border-radius: 20px;\n    font-size: 0.75rem;\n    font-weight: 500;\n    text-transform: uppercase;\n}\n\n.homework-type.text {\n    background: #dbeafe;\n    color: #1e40af;\n}\n\n.homework-type.audio {\n    background: #fef3c7;\n    color: #92400e;\n}\n\n.homework-type.video {\n    background: #f3e8ff;\n    color: #7c3aed;\n}\n\n.homework-student {\n    font-weight: 600;\n    color: #1e293b;\n    margin-bottom: 0.5rem;\n}\n\n.homework-content {\n    color: #64748b;\n    margin-bottom: 1rem;\n    line-height: 1.5;\n}\n\n.homework-meta {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1rem;\n    font-size: 0.875rem;\n    color: #6b7280;\n}\n\n.homework-score {\n    font-weight: 600;\n    color: #059669;\n}\n\n.homework-score.pending {\n    color: #6b7280;\n    font-style: italic;\n}\n\n.homework-feedback {\n    background: #f8fafc;\n    border: 1px solid #e2e8f0;\n    border-radius: 6px;\n    padding: 0.75rem;\n    margin-bottom: 1rem;\n    font-size: 0.875rem;\n    color: #374151;\n}\n\n.homework-actions {\n    display: flex;\n    gap: 0.5rem;\n}\n\n/* Modal Styles */\n.modal {\n    display: none;\n    position: fixed;\n    z-index: 1000;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    backdrop-filter: blur(4px);\n    cursor: pointer;\n}\n\n.modal-content {\n    background-color: white;\n    margin: 5% auto;\n    padding: 0;\n    border-radius: 12px;\n    width: 90%;\n    max-width: 500px;\n    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);\n    animation: modalSlideIn 0.3s ease;\n    cursor: default;\n}\n\n.wide-modal {\n    max-width: 800px;\n}\n\n@keyframes modalSlideIn {\n    from {\n        opacity: 0;\n        transform: translateY(-50px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n.modal-header {\n    padding: 1.5rem 1.5rem 1rem;\n    border-bottom: 1px solid #e2e8f0;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.modal-header h3 {\n    font-size: 1.25rem;\n    font-weight: 600;\n    color: #1e293b;\n}\n\n.close {\n    color: #6b7280;\n    font-size: 2rem;\n    font-weight: bold;\n    cursor: pointer;\n    transition: color 0.2s ease;\n    padding: 0.5rem;\n    line-height: 1;\n    user-select: none;\n    min-width: 2rem;\n    min-height: 2rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.close:hover {\n    color: #374151;\n    background-color: #f3f4f6;\n    border-radius: 4px;\n}\n\n/* Form Styles */\n.form-group {\n    margin-bottom: 1.5rem;\n    padding: 0 1.5rem;\n}\n\n.form-group label {\n    display: block;\n    margin-bottom: 0.5rem;\n    font-weight: 500;\n    color: #374151;\n}\n\n.form-group input,\n.form-group select,\n.form-group textarea {\n    width: 100%;\n    padding: 0.75rem;\n    border: 1px solid #d1d5db;\n    border-radius: 6px;\n    font-size: 0.875rem;\n    transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n\n.form-group input:focus,\n.form-group select:focus,\n.form-group textarea:focus {\n    outline: none;\n    border-color: #667eea;\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n.form-group textarea {\n    resize: vertical;\n    min-height: 100px;\n}\n\n.form-actions {\n    padding: 1rem 1.5rem 1.5rem;\n    display: flex;\n    gap: 1rem;\n    justify-content: flex-end;\n    border-top: 1px solid #e2e8f0;\n}\n\n/* Student Submissions Modal */\n.modal-body {\n    padding: 1.5rem;\n}\n\n.student-info {\n    background: #f8fafc;\n    padding: 1rem;\n    border-radius: 8px;\n    margin-bottom: 1.5rem;\n    border: 1px solid #e2e8f0;\n}\n\n.student-info p {\n    margin: 0.5rem 0;\n    color: #374151;\n}\n\n.submissions-list {\n    max-height: 400px;\n    overflow-y: auto;\n}\n\n.submission-item {\n    background: white;\n    border: 1px solid #e2e8f0;\n    border-radius: 8px;\n    padding: 1rem;\n    margin-bottom: 1rem;\n}\n\n.submission-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 0.75rem;\n}\n\n.submission-type {\n    padding: 0.25rem 0.75rem;\n    border-radius: 20px;\n    font-size: 0.75rem;\n    font-weight: 500;\n    text-transform: uppercase;\n}\n\n.submission-date {\n    color: #64748b;\n    font-size: 0.875rem;\n}\n\n.submission-content p {\n    margin: 0.5rem 0;\n    color: #374151;\n}\n\n.submission-actions {\n    margin-top: 1rem;\n    padding-top: 0.75rem;\n    border-top: 1px solid #f1f5f9;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n    .header-content {\n        padding: 0 1rem;\n        flex-direction: column;\n        gap: 1rem;\n    }\n    \n    .main-content {\n        padding: 1rem;\n    }\n    \n    .insights-grid,\n    .charts-grid {\n        grid-template-columns: 1fr;\n    }\n    \n    .table-controls {\n        flex-direction: column;\n        align-items: stretch;\n    }\n    \n    .students-table {\n        font-size: 0.875rem;\n    }\n    \n    .students-table th,\n    .students-table td {\n        padding: 0.75rem 0.5rem;\n    }\n    \n    .homework-grid {\n        grid-template-columns: 1fr;\n    }\n    \n    .modal-content {\n        width: 95%;\n        margin: 10% auto;\n    }\n}\n\n/* Loading States */\n.loading {\n    opacity: 0.6;\n    pointer-events: none;\n}\n\n.loading::after {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 20px;\n    height: 20px;\n    margin: -10px 0 0 -10px;\n    border: 2px solid #667eea;\n    border-top: 2px solid transparent;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}\n\n/* Utility Classes */\n.text-center { text-align: center; }\n.text-left { text-align: left; }\n.text-right { text-align: right; }\n\n.mb-1 { margin-bottom: 0.25rem; }\n.mb-2 { margin-bottom: 0.5rem; }\n.mb-3 { margin-bottom: 0.75rem; }\n.mb-4 { margin-bottom: 1rem; }\n\n.mt-1 { margin-top: 0.25rem; }\n.mt-2 { margin-top: 0.5rem; }\n.mt-3 { margin-top: 0.75rem; }\n.mt-4 { margin-top: 1rem; } \n\n/* Enhanced existing chart styles */\n.trend-card {\n    background: white;\n    border-radius: 12px;\n    padding: 20px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    border: 1px solid #e2e8f0;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    min-height: 200px;\n}\n\n.trend-card:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n}\n\n.trend-card h4 {\n    font-size: 1.125rem;\n    font-weight: 600;\n    margin-bottom: 1rem;\n    color: #374151;\n    text-align: center;\n}\n\n.trends-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n    gap: 1.5rem;\n    margin-bottom: 2rem;\n} \n\n/* Focus card within insights */\n.focus-card {\n    grid-column: span 1;\n}\n\n.attention-list {\n    display: flex;\n    flex-direction: column;\n    gap: 0.75rem;\n}\n\n.attention-item { \n    background: #fef2f2; \n    padding: 20px; \n    margin: 12px 0; \n    border-radius: 8px;\n    border-left: 4px solid #ef4444; \n    display: flex;\n    gap: 20px;\n    align-items: center;\n    min-height: 100px;\n}\n\n.student-info { \n    background: #f3f4f6; \n    padding: 16px; \n    border-radius: 6px; \n    min-width: 140px;\n    text-align: center;\n}\n\n.student-name { \n    margin: 0 0 8px 0; \n    color: #dc2626; \n    font-weight: 600;\n    font-size: 16px;\n}\n\n.student-score { \n    margin: 0; \n    color: #374151; \n    font-weight: 500;\n    font-size: 18px;\n}\n\n.student-reason { \n    flex: 1;\n    color: #6b7280;\n    font-size: 15px;\n    line-height: 1.5;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    text-align: center;\n}\n\n.student-reason strong {\n    color: #374151;\n    font-size: 16px;\n}\n\n.performance-comparison {\n    display: block;\n    margin-top: 0.5rem;\n    font-size: 14px;\n    color: #4b5563;\n}\n\n.gap-indicator {\n    color: #dc2626;\n    font-weight: 600;\n    margin-left: 0.5rem;\n} \n\n/* Parent Engagement Survey Section */\n.survey-section {\n    margin-top: 2rem;\n}\n\n.survey-section h3 {\n    font-size: 1.25rem;\n    font-weight: 600;\n    margin-bottom: 1.5rem;\n    color: #374151;\n    text-align: center;\n}\n\n.survey-response-rate {\n    display: flex;\n    justify-content: center;\n    margin-bottom: 2rem;\n}\n\n.response-rate-card {\n    background: linear-gradient(135deg, #667eea, #764ba2);\n    color: white;\n    padding: 1.5rem 2rem;\n    border-radius: 12px;\n    text-align: center;\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n\n.response-rate-value {\n    font-size: 2.5rem;\n    font-weight: 700;\n    margin-bottom: 0.5rem;\n}\n\n.response-rate-label {\n    font-size: 1rem;\n    opacity: 0.9;\n}\n\n.survey-questions {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n    gap: 1.5rem;\n}\n\n.survey-question {\n    background: white;\n    border-radius: 12px;\n    padding: 1.5rem;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    border: 1px solid #e2e8f0;\n}\n\n.survey-question h4 {\n    font-size: 1rem;\n    font-weight: 600;\n    margin-bottom: 1rem;\n    color: #374151;\n    text-align: center;\n}\n\n.survey-question canvas {\n    display: block;\n    margin: 0 auto;\n    max-width: 100%;\n    height: auto;\n} \n\n/* Server Info Section */\n.server-info-section {\n    margin: 1rem 0;\n    padding: 0 1rem;\n}\n\n.server-info-container {\n    max-width: 1200px;\n    margin: 0 auto;\n}\n\n.server-info-card {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    padding: 1.5rem;\n    border-radius: 12px;\n    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);\n}\n\n.server-info-card h3 {\n    margin: 0 0 1rem 0;\n    font-size: 1.25rem;\n    font-weight: 600;\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n}\n\n.server-details {\n    margin-bottom: 1.5rem;\n}\n\n.server-details p {\n    margin: 0.5rem 0;\n    font-size: 0.95rem;\n}\n\n.server-details strong {\n    color: #e2e8f0;\n}\n\n.server-instructions {\n    background: rgba(255, 255, 255, 0.1);\n    padding: 1rem;\n    border-radius: 8px;\n    border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.server-instructions h4 {\n    margin: 0 0 0.75rem 0;\n    font-size: 1rem;\n    font-weight: 600;\n    color: #e2e8f0;\n}\n\n.server-instructions ol {\n    margin: 0;\n    padding-left: 1.25rem;\n}\n\n.server-instructions li {\n    margin: 0.25rem 0;\n    font-size: 0.9rem;\n    line-height: 1.4;\n}\n\n.server-instructions strong {\n    color: #fbbf24;\n}\n\n/* CSV Import Section */\n.csv-import-section {\n    background: white;\n    border-radius: 12px;\n    padding: 2rem;\n    margin-bottom: 2rem;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    border: 1px solid #e2e8f0;\n}\n\n.import-container h3 {\n    text-align: center;\n    margin-bottom: 1.5rem;\n    color: #374151;\n    font-size: 1.25rem;\n    font-weight: 600;\n}\n\n.upload-area {\n    border: 2px dashed #d1d5db;\n    border-radius: 12px;\n    padding: 3rem 2rem;\n    text-align: center;\n    transition: all 0.3s ease;\n    background: #f9fafb;\n    cursor: pointer;\n}\n\n.upload-area:hover {\n    border-color: #667eea;\n    background: #f0f4ff;\n}\n\n.upload-area.dragover {\n    border-color: #10b981;\n    background: #f0fdf4;\n    transform: scale(1.02);\n}\n\n.upload-content i {\n    font-size: 3rem;\n    color: #9ca3af;\n    margin-bottom: 1rem;\n}\n\n.upload-content h4 {\n    color: #374151;\n    margin-bottom: 0.5rem;\n    font-size: 1.125rem;\n    font-weight: 600;\n}\n\n.upload-content p {\n    color: #6b7280;\n    margin-bottom: 1rem;\n}\n\n.upload-hint {\n    font-size: 0.875rem;\n    color: #9ca3af;\n    margin-top: 1rem;\n}\n\n.btn {\n    display: inline-flex;\n    align-items: center;\n    gap: 0.5rem;\n    padding: 0.75rem 1.5rem;\n    border: none;\n    border-radius: 8px;\n    font-size: 0.875rem;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    text-decoration: none;\n}\n\n.btn-primary {\n    background: #667eea;\n    color: white;\n}\n\n.btn-primary:hover {\n    background: #5a67d8;\n    transform: translateY(-1px);\n}\n\n.import-status {\n    margin-top: 1rem;\n    padding: 1rem;\n    border-radius: 8px;\n    background: #f0f9ff;\n    border: 1px solid #0ea5e9;\n}\n\n.status-content {\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n    color: #0c4a6e;\n}\n\n.status-content i {\n    font-size: 1.125rem;\n}\n\n/* Import Status Types */\n.status-success {\n    background: #f0fdf4;\n    border-color: #10b981;\n}\n\n.status-success .status-content {\n    color: #065f46;\n}\n\n.status-error {\n    background: #fef2f2;\n    border-color: #ef4444;\n}\n\n.status-error .status-content {\n    color: #991b1b;\n}\n\n/* Notifications */\n.notification {\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background: white;\n    border-radius: 8px;\n    padding: 1rem 1.5rem;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    border-left: 4px solid #667eea;\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n    z-index: 1000;\n    animation: slideIn 0.3s ease;\n    max-width: 400px;\n}\n\n.notification-success {\n    border-left-color: #10b981;\n}\n\n.notification-error {\n    border-left-color: #ef4444;\n}\n\n.notification i {\n    font-size: 1.125rem;\n}\n\n.notification-success i {\n    color: #10b981;\n}\n\n.notification-error i {\n    color: #ef4444;\n}\n\n.notification button {\n    background: none;\n    border: none;\n    color: #9ca3af;\n    cursor: pointer;\n    font-size: 1.25rem;\n    margin-left: auto;\n    padding: 0;\n}\n\n.notification button:hover {\n    color: #6b7280;\n}\n\n@keyframes slideIn {\n    from {\n        transform: translateX(100%);\n        opacity: 0;\n    }\n    to {\n        transform: translateX(0);\n        opacity: 1;\n    }\n}\n\n/* Dashboard Header */\n.dashboard-header {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    padding: 2rem;\n    text-align: center;\n    border-radius: 12px;\n    margin-bottom: 2rem;\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n\n.dashboard-header h1 {\n    margin: 0 0 0.5rem 0;\n    font-size: 2rem;\n    font-weight: 700;\n}\n\n.dashboard-header p {\n    margin: 0;\n    opacity: 0.9;\n    font-size: 1.125rem;\n} ",""]);const i=s},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},601:n=>{n.exports=function(n){return n[1]}},659:n=>{var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,r&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}}},e={};function t(o){var r=e[o];if(void 0!==r)return r.exports;var a=e[o]={id:o,exports:{}};return n[o](a,a.exports,t),a.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0;var o=t(72),r=t.n(o),a=t(825),s=t.n(a),i=t(659),d=t.n(i),c=t(56),l=t.n(c),m=t(540),g=t.n(m),p=t(113),u=t.n(p),f=t(365),h={};h.styleTagTransform=u(),h.setAttributes=l(),h.insert=d().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=g(),r()(f.A,h),f.A&&f.A.locals&&f.A.locals;let b=[],x=[],w={};const y="http://localhost:3001/api";function v(){const n=document.getElementById("searchInput")?.value.toLowerCase()||"",e=document.getElementById("kindergartenFilter")?.value||"";!function(n){try{const e=document.getElementById("studentsTableBody");if(!e)return;const t=n.map(n=>`\n            <tr>\n                <td>${n.name}</td>\n                <td>${n.kindergarten}</td>\n                <td>${n.averageExerciseScore.toFixed(1)}</td>\n                <td>${Math.round(n.parentTimePerWeek)}</td>\n                <td>\n                    <div class="learning-areas-summary">\n                        <span class="area-score">A: ${n.learningAreas["Alphabet Recognition"]}</span>\n                        <span class="area-score">S: ${n.learningAreas["Sight Word Recognition"]}</span>\n                        <span class="area-score">V: ${n.learningAreas.Vocabulary}</span>\n                        <span class="area-score">P: ${n.learningAreas["Point and Read"]}</span>\n                        <span class="area-score">Ph: ${n.learningAreas["Phonemic Awareness"]}</span>\n                    </div>\n                </td>\n            </tr>\n        `).join("");e.innerHTML=t}catch(n){console.error("Error rendering filtered students table:",n)}}(b.filter(t=>{const o=t.name.toLowerCase().includes(n)||t.kindergarten.toLowerCase().includes(n),r=!e||t.kindergarten===e;return o&&r}))}function k(n){const e=document.getElementById(n);e&&(e.style.display="none","studentSubmissionsModal"===n&&setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},300))}function S(){try{if(!w)return;console.log("Rendering insights with data:",w),function(){try{const n=document.getElementById("attentionStudents");if(!n||!w.studentsNeedingAttention)return;const e=w.studentsNeedingAttention.map(n=>`\n            <div class="attention-item">\n                <div class="student-info">\n                    <div class="student-name">${n.name}</div>\n                    <div class="student-score">${n.averageExerciseScore.toFixed(1)}</div>\n                </div>\n                <div class="student-reason">\n                    <strong>Needs focus:</strong> ${n.worstArea}<br>\n                    <span class="performance-comparison">\n                        ${n.actualValue} vs ${n.averageValue} (class average)\n                        <span class="gap-indicator">-${n.worstGap} ${"parent"===n.worstType?"min":"pts"}</span>\n                    </span>\n                </div>\n            </div>\n        `).join("");n.innerHTML=e}catch(n){console.error("Error rendering attention students:",n)}}(),void 0!==w.totalParentHours&&(document.getElementById("totalParentHours").textContent=`+${w.totalParentHours}`),I(),A(),function(){try{if(!w||!w.focusArea)return;const n=document.getElementById("focusArea");n&&(n.innerHTML=`\n                <div class="focus-recommendation">\n                    <p><span class="focus-label">Focus area:</span> <span class="focus-area-name">${w.focusArea.name}</span> <span class="focus-score">(${w.focusArea.score})</span></p>\n                </div>\n            `),function(){const n=document.getElementById("learningAreasChart");if(!n)return;let e=n.querySelector("canvas");e||(e=document.createElement("canvas"),e.width=500,e.height=300,n.appendChild(e));const t=e.getContext("2d");t&&w.focusArea&&w.focusArea.learningAreaAverages&&(Object.entries(w.focusArea.learningAreaAverages).map(([n,e])=>({label:C(n),value:e})),t.clearRect(0,0,e.width,e.height),function(n,e,t,o){n.clearRect(0,0,t,o);const r=Object.values(e);if(!r.some(n=>n&&!isNaN(n)&&n>0))return console.warn("No valid data to display in bar chart"),n.fillStyle="#9ca3af",n.font="16px Inter",n.textAlign="center",void n.fillText("No data available",t/2,o/2);const a=40,s=t-80,i=o-80,d=Object.keys(e),c=Math.max(...r),l=s/d.length,m=.2*l,g=l-m;n.fillStyle="rgba(248, 250, 252, 0.8)",n.fillRect(a,a,s,i),n.strokeStyle="rgba(226, 232, 240, 0.6)",n.lineWidth=.5;for(let e=0;e<=4;e++){const o=a+e*i/4;n.beginPath(),n.moveTo(a,o),n.lineTo(t-a,o),n.stroke()}const p=["#667eea","#10b981","#f59e0b","#ef4444","#8b5cf6"];d.forEach((t,r)=>{const s=e[t];if(!s||isNaN(s)||s<=0)return void console.warn(`Invalid value for ${t}:`,s);const d=s/c*i,u=a+r*l+m/2,f=o-a-d;if(f>=o-a||f<0||isNaN(f))return void console.warn(`Invalid y coordinate for ${t}:`,f,"barHeight:",d);const h=n.createLinearGradient(0,f,0,o-a);h.addColorStop(0,p[r%p.length]),h.addColorStop(1,p[r%p.length]+"80"),n.fillStyle=h;n.beginPath(),n.moveTo(u+6,f),n.lineTo(u+g-6,f),n.quadraticCurveTo(u+g,f,u+g,f+6),n.lineTo(u+g,f+d-6),n.quadraticCurveTo(u+g,f+d,u+g-6,f+d),n.lineTo(u+6,f+d),n.quadraticCurveTo(u,f+d,u,f+d-6),n.lineTo(u,f+6),n.quadraticCurveTo(u,f,u+6,f),n.closePath(),n.fill(),n.shadowColor="rgba(0, 0, 0, 0.1)",n.shadowBlur=4,n.shadowOffsetX=2,n.shadowOffsetY=2,n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0,n.fillStyle="#374151",n.font="bold 12px Inter",n.textAlign="center",n.fillText(s,u+g/2,f-10),n.fillStyle="#64748b",n.font="11px Inter",n.textAlign="center";const b=function(n){return n?{"Alphabet Recognition":"Alphabet","Sight Word Recognition":"Sight Words",Vocabulary:"Vocab","Point and Read":"Point & Read","Phonemic Awareness":"Phonemic"}[n]||n.substring(0,12):""}(t);if(n.fillText(b,u+g/2,o-a+15),b!==t&&!t.includes("Sight Word")&&!t.includes("Point and Read")){const e=t.split(" "),r=14;for(let t=1;t<e.length;t++)n.fillText(e[t],u+g/2,o-a+15+t*r)}}),n.strokeStyle="#e2e8f0",n.lineWidth=2,n.beginPath(),n.moveTo(a,a),n.lineTo(a,o-a),n.lineTo(t-a,o-a),n.stroke()}(t,w.focusArea.learningAreaAverages,e.width,e.height))}()}catch(n){console.error("Error rendering focus area:",n)}}(),function(){try{if(!w.parentEngagementSurvey)return;const n=w.parentEngagementSurvey,e=document.getElementById("responseRate");e&&(e.textContent=`${n.responseRate}%`),E("question1Canvas",n.question1,"pie"),E("question2Canvas",n.question2,"doughnut"),E("question3Canvas",n.question3,"doughnut")}catch(n){console.error("Error rendering parent engagement survey:",n)}}()}catch(n){console.error("Error rendering insights:",n)}}function E(n,e,t="pie"){try{const o=document.getElementById(n);if(!o)return void console.error(`Canvas not found: ${n}`);const r=o.getContext("2d");if(!r)return void console.error(`Cannot get 2D context for: ${n}`);const a=e.responses,s=Object.keys(a),i=Object.values(a),d=["#667eea","#10b981","#f59e0b","#ef4444","#8b5cf6"];r.clearRect(0,0,o.width,o.height),"pie"===t?function(n,e,t,o,r,a){const s=r/2,i=a/2-15,d=Math.min(r,a)/2-40,c=e.reduce((n,e)=>n+e,0);let l=0;e.forEach((e,t)=>{const r=e/c*2*Math.PI;n.beginPath(),n.moveTo(s,i),n.arc(s,i,d,l,l+r),n.closePath(),n.fillStyle=o[t%o.length],n.fill(),n.strokeStyle="#ffffff",n.lineWidth=2,n.stroke(),l+=r}),n.fillStyle="#ffffff",n.font="bold 14px Inter",n.textAlign="center",n.textBaseline="middle",l=0,e.forEach((e,t)=>{const o=e/c*2*Math.PI,r=l+o/2,a=.6*d,m=s+Math.cos(r)*a,g=i+Math.sin(r)*a,p=Math.round(e/c*100);n.shadowColor="rgba(0, 0, 0, 0.5)",n.shadowBlur=3,n.shadowOffsetX=1,n.shadowOffsetY=1,n.fillText(`${p}%`,m,g),n.shadowColor="transparent",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0,l+=o});const m=a-35,g=r/t.length;t.forEach((e,t)=>{const r=5+t*g+g/2;n.fillStyle=o[t%o.length],n.fillRect(r-8,m-8,16,16),n.strokeStyle="#ffffff",n.lineWidth=1,n.strokeRect(r-8,m-8,16,16),n.fillStyle="#374151",n.font="11px Inter",n.textAlign="center",n.textBaseline="top";let a=e;e.includes("minutes")&&(a=e.replace("minutes","min")),a.length>20&&(a=a.substring(0,17)+"..."),n.fillText(a,r,m+10)})}(r,i,s,d,o.width,o.height):function(n,e,t,o,r,a){const s=r/2,i=a/2,d=Math.min(r,a)/2-40,c=.6*d,l=t.reduce((n,e)=>n+e,0);let m=0;t.forEach((e,t)=>{const r=e/l*2*Math.PI;n.beginPath(),n.arc(s,i,d,m,m+r),n.arc(s,i,c,m+r,m,!0),n.closePath(),n.fillStyle=o[t%o.length],n.fill(),n.strokeStyle="#ffffff",n.lineWidth=2,n.stroke(),m+=r}),n.fillStyle="#374151",n.font="bold 14px Inter",n.textAlign="center",n.fillText("Survey",s,i-5),n.fillText("Results",s,i+15);const g=a-40;e.forEach((e,r)=>{const a=g+16*r;n.fillStyle=o[r%o.length],n.fillRect(10,a-8,12,12),n.fillStyle="#374151",n.font="11px Inter",n.textAlign="left",n.fillText(`${e}: ${t[r]}%`,28,a)})}(r,s,i,d,o.width,o.height)}catch(n){console.error("Error rendering question chart:",n)}}function I(){const n=document.getElementById("exerciseChart");if(!n)return;const e=n.getContext("2d");if(e&&w.exerciseTrend){const t=w.exerciseTrend;e.clearRect(0,0,n.width,n.height),T(e,t,n.width,n.height,"#10b981")}}function A(){const n=document.getElementById("parentTimeChart");if(!n)return;const e=n.getContext("2d");if(e&&w.parentTimeTrend){const t=w.parentTimeTrend;e.clearRect(0,0,n.width,n.height),T(e,t,n.width,n.height,"#667eea")}}function T(n,e,t,o,r="#667eea"){const a=60,s=t-120,i=o-120,d=e.map(n=>n.averageScore||n.averageMinutes),c=Math.min(...d),l=Math.max(...d),m=l-c,g=n.createLinearGradient(0,0,0,o);"#10b981"===r?(g.addColorStop(0,"rgba(16, 185, 129, 0.08)"),g.addColorStop(1,"rgba(16, 185, 129, 0.03)")):(g.addColorStop(0,"rgba(102, 126, 234, 0.08)"),g.addColorStop(1,"rgba(102, 126, 234, 0.03)")),n.fillStyle=g,n.fillRect(a,a,s,i),n.strokeStyle="rgba(203, 213, 225, 0.6)",n.lineWidth=1;for(let e=0;e<=4;e++){const o=a+e*i/4;n.beginPath(),n.moveTo(a,o),n.lineTo(t-a,o),n.stroke()}for(let e=0;e<=7;e++){const t=a+e*s/7;n.beginPath(),n.moveTo(t,a),n.lineTo(t,o-a),n.stroke()}n.strokeStyle=r,n.lineWidth=4,n.lineCap="round",n.lineJoin="round",n.beginPath(),e.forEach((t,r)=>{const d=a+r*s/(e.length-1),l=t.averageScore||t.averageMinutes,g=o-a-(l-c)/m*i;0===r?n.moveTo(d,g):n.lineTo(d,g)}),n.stroke(),e.forEach((t,d)=>{const l=a+d*s/(e.length-1),g=t.averageScore||t.averageMinutes,p=o-a-(g-c)/m*i;n.fillStyle="#ffffff",n.beginPath(),n.arc(l,p,6,0,2*Math.PI),n.fill(),n.strokeStyle=r,n.lineWidth=2,n.stroke(),n.fillStyle=r,n.beginPath(),n.arc(l,p,3,0,2*Math.PI),n.fill()}),n.fillStyle="#64748b",n.font="12px Inter",n.textAlign="center",n.fillStyle="#64748b",n.font="bold 12px Inter",n.textAlign="center",n.fillText("Week",t/2,o-a+40),e.forEach((t,r)=>{const i=a+r*s/(e.length-1),d=t.week||r+1;n.fillStyle="#64748b",n.font="11px Inter",n.fillText(`W${d}`,i,o-a+20)}),n.textAlign="right",n.font="bold 11px Inter",n.save(),"#10b981"===r?n.translate(15,o/2):"#667eea"===r?n.translate(12,o/2):n.translate(15,o/2),n.rotate(-Math.PI/2),n.fillStyle="#374151",n.font="bold 16px Inter, sans-serif",n.textAlign="center","#10b981"===r?n.fillText("Score (0-100)",0,0):"#667eea"===r?n.fillText("Time/Week (min)",0,0):n.fillText("Value",0,0),n.restore(),"#667eea"===r&&(n.fillStyle="#374151",n.font="bold 16px Inter, sans-serif",n.textAlign="center",n.fillText("Parent Time Trend",t/2,25));for(let e=0;e<5;e++){const t=a+e*(o-120)/4;let s=(l-e*m/4).toFixed(1),i=s;i="#10b981"===r||"#667eea"===r?`${s}`:s,n.font="bold 10px Inter, sans-serif";const d=n.measureText(i).width;let c;c="#10b981"===r?Math.max(30,a-d-75):"#667eea"===r?Math.max(30,a-d-90):Math.max(30,a-d-75),n.fillStyle="#1f2937",n.font="bold 13px Inter, sans-serif",n.textAlign="right",n.fillText(i,c+d,t+4)}}function $(){try{const n=document.getElementById("studentsTableBody");if(!n)return;const e=b.map(n=>`\n            <tr>\n                <td>${n.name}</td>\n                <td>${n.kindergarten}</td>\n                <td>${n.averageExerciseScore.toFixed(1)}</td>\n                <td>${Math.round(n.parentTimePerWeek)}</td>\n                <td>\n                    <div class="learning-areas-summary">\n                        <span class="area-score">A: ${n.learningAreas["Alphabet Recognition"]}</span>\n                        <span class="area-score">S: ${n.learningAreas["Sight Word Recognition"]}</span>\n                        <span class="area-score">V: ${n.learningAreas.Vocabulary}</span>\n                        <span class="area-score">P: ${n.learningAreas["Point and Read"]}</span>\n                        <span class="area-score">Ph: ${n.learningAreas["Phonemic Awareness"]}</span>\n                    </div>\n                </td>\n            </tr>\n        `).join("");n.innerHTML=e}catch(n){console.error("Error rendering students table:",n)}}function C(n){return n.replace(/([A-Z])/g," $1").replace(/^./,n=>n.toUpperCase())}document.addEventListener("DOMContentLoaded",async()=>{function n(){try{const n=document.documentElement.scrollHeight||document.body.scrollHeight||0;window.parent&&window.parent.postMessage({type:"NGO_DASHBOARD_HEIGHT",height:n},"*")}catch(n){}}await async function(){try{console.log("Initializing dashboard..."),await async function(){try{const n=await fetch(`${y}/students`);if(!n.ok)throw new Error("Failed to fetch students");b=await n.json(),console.log(`Fetched ${b.length} students`)}catch(n){throw console.error("Error fetching students:",n),n}}(),await async function(){try{const n=await fetch(`${y}/insights`);if(!n.ok)throw new Error("Failed to fetch insights");w=await n.json(),console.log("Fetched insights data")}catch(n){throw console.error("Error fetching insights:",n),n}}(),await async function(){try{const n=await fetch(`${y}/homework`);if(!n.ok)throw new Error("Failed to fetch homework submissions");x=await n.json(),console.log(`Fetched ${x.length} homework submissions`)}catch(n){throw console.error("Error fetching homework submissions:",n),n}}(),$(),S(),document.getElementById("homeworkGrid")&&function(){const n=document.getElementById("homeworkGrid");n.innerHTML="";const e={};x.forEach(n=>{e[n.studentId]||(e[n.studentId]=[]),e[n.studentId].push(n)});const t=document.createElement("div");t.className="homework-scroll-container",b.forEach(n=>{const o=e[n.id]||[],r=document.createElement("div");r.className="homework-card student-homework-card";const a=o.reduce((n,e)=>(n[e.type]=(n[e.type]||0)+1,n),{}),s=o.length>0?new Date(Math.max(...o.map(n=>new Date(n.submittedAt)))).toLocaleDateString():"No submissions yet";r.innerHTML=`\n            <div class="homework-header">\n                <div>\n                    <div class="homework-student">${n.name}</div>\n                    <div class="homework-kindergarten">${n.kindergarten}</div>\n                </div>\n                <div class="homework-type-counts">\n                    ${Object.entries(a).length>0?Object.entries(a).map(([n,e])=>`\n                            <span class="type-count ${n}">${n}: ${e}</span>\n                        `).join(""):'<span class="no-submissions">No submissions</span>'}\n                </div>\n            </div>\n            <div class="homework-summary">\n                <p><strong>Total Submissions:</strong> ${o.length}</p>\n                <p><strong>Latest Submission:</strong> ${s}</p>\n                <p><strong>Average Score:</strong> ${o.length>0&&Math.round(o.filter(n=>n.score).reduce((n,e)=>n+e.score,0)/o.filter(n=>n.score).length)||"N/A"}</p>\n            </div>\n            <div class="homework-recent-submissions">\n                <h4>Recent Submissions:</h4>\n                ${o.length>0?o.slice(-3).reverse().map(n=>`\n                        <div class="recent-submission">\n                            <span class="submission-type ${n.type}">${n.type}</span>\n                            <span class="submission-content">${n.content.length>30?n.content.substring(0,30)+"...":n.content}</span>\n                            <span class="submission-score">${n.score?n.score+"/100":"Pending"}</span>\n                        </div>\n                    `).join(""):'<p class="no-submissions">No submissions yet</p>'}\n            </div>\n            <div class="homework-actions">\n                ${o.length>0?`<button class="btn btn-sm btn-primary" onclick="viewStudentSubmissions('${n.id}')">\n                        <i class="fas fa-eye"></i>\n                        View All (${o.length})\n                    </button>`:'<button class="btn btn-sm btn-secondary" disabled>\n                        <i class="fas fa-eye"></i>\n                        No Submissions\n                    </button>'}\n            </div>\n        `,t.appendChild(r)}),n.appendChild(t)}(),function(){console.log("🔧 Setting up event listeners...");const n=document.getElementById("downloadReportBtn");n?(console.log("📥 Found download button, setting up listener..."),n.removeEventListener("click",P),n.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),P()}),console.log("✅ Download button listener attached")):console.log("❌ Download button not found");const e=document.getElementById("searchInput");e&&e.addEventListener("input",v);const t=document.getElementById("kindergartenFilter");t&&t.addEventListener("change",v),function(){const n=document.getElementById("uploadArea"),e=document.getElementById("fileInput"),t=document.getElementById("browseBtn");document.getElementById("importStatus"),document.getElementById("statusMessage"),t.addEventListener("click",()=>{e.click()}),e.addEventListener("change",n=>{const e=n.target.files[0];e&&M(e)}),n.addEventListener("dragover",e=>{e.preventDefault(),n.classList.add("dragover")}),n.addEventListener("dragleave",()=>{n.classList.remove("dragover")}),n.addEventListener("drop",e=>{e.preventDefault(),n.classList.remove("dragover");const t=e.dataTransfer.files;if(t.length>0){const n=t[0];"text/csv"===n.type||n.name.endsWith(".csv")?M(n):W("Please select a valid CSV file","error")}}),n.addEventListener("click",()=>{e.click()})}()}(),console.log("Dashboard initialized successfully")}catch(n){console.error("Error initializing dashboard:",n),z("Error loading dashboard data","error")}}(),n(),window.addEventListener("resize",n),new MutationObserver(()=>n()).observe(document.body,{childList:!0,subtree:!0,attributes:!0}),setTimeout(n,300),setTimeout(n,1e3),setTimeout(n,2e3),window.addEventListener("message",e=>{try{"REQUEST_NGO_HEIGHT"===e?.data?.type&&n()}catch{}})});let _=!1;async function P(){if(_)console.log("⏳ Download already in progress, ignoring click");else{console.log("🚀 Download report function called!",(new Date).toISOString()),_=!0;try{const n=await fetch(`${y}/report/pdf`);if(!n.ok)throw new Error("Failed to generate report");{const e=await n.blob();try{if(navigator.msSaveBlob)navigator.msSaveBlob(e,"ngo-k3-performance-report.pdf");else{const n=window.URL.createObjectURL(e),t=document.createElement("a");t.href=n,t.download="ngo-k3-performance-report.pdf",t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),setTimeout(()=>{window.URL.revokeObjectURL(n)},100)}}catch(n){console.log("Download method failed, trying alternative:",n);const t=window.URL.createObjectURL(e);window.open(t,"_blank"),setTimeout(()=>{window.URL.revokeObjectURL(t)},1e3)}z("Report downloaded successfully!","success")}}catch(n){console.error("Error downloading report:",n),z("Error downloading report","error"),_=!1}}}function z(n,e="info"){const t=document.createElement("div");t.className=`notification notification-${e}`,t.textContent=n,t.style.cssText="\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        padding: 1rem 1.5rem;\n        border-radius: 8px;\n        color: white;\n        font-weight: 500;\n        z-index: 10000;\n        animation: slideIn 0.3s ease;\n        max-width: 300px;\n    ";const o={success:"#10b981",error:"#ef4444",info:"#667eea"};t.style.backgroundColor=o[e]||o.info,document.body.appendChild(t),setTimeout(()=>{t.style.animation="slideOut 0.3s ease",setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},300)},3e3)}function M(n){W("Reading CSV file...","processing");const e=new FileReader;e.onload=n=>{try{const e=function(n){console.log("=== CSV Parsing Debug ==="),console.log("Raw CSV content length:",n.length),console.log("First 500 characters:",n.substring(0,500));const e=n.split("\n");console.log("Number of lines:",e.length),console.log("First line:",e[0]),console.log("Second line:",e[1]);const t=e[0].split(",").map(n=>n.trim());console.log("Parsed headers:",t);const o=[];for(let n=1;n<e.length;n++)if(e[n].trim()){const r=e[n].split(",").map(n=>n.trim());console.log(`Line ${n} values:`,r);const a={};t.forEach((n,e)=>{a[n]=r[e]||""}),console.log(`Line ${n} parsed row:`,a),o.push(a)}return console.log("Final parsed data:",o),{headers:t,data:o}}(n.target.result);if(function(n){console.log("Found CSV headers:",n.headers),console.log("Expected headers:",["ID","Name","Kindergarten","Week1_Score","Week2_Score","Week3_Score","Week4_Score","Week5_Score","Week6_Score","Week7_Score","Week8_Score","Average_Exer","Parent_Time","Alphabet_Re","Sight_Word_I","Vocabulary_S","Point_and_R","Phonemic_Av","Week1_Attempts","Week2_Attempts","Week3_Attempts","Week4_Attempts","Week5_Attempts","Week6_Attempts","Week7_Attempts","Week8_Attempts"]);const e=["ID","Name","Kindergarten"].filter(e=>!n.headers.some(n=>n.toLowerCase().includes(e.toLowerCase())));if(e.length>0)return console.error("Missing essential headers:",e),W(`Missing essential columns: ${e.join(", ")}. Please check your CSV file.`,"error"),!1;if(0===n.data.length)return console.error("No data rows found"),W("No data rows found in CSV file.","error"),!1;return n.headers.some(n=>n.toLowerCase().includes("score")||n.toLowerCase().includes("week"))?(console.log("CSV validation passed"),!0):(console.error("No score columns found"),W("No weekly score columns found. Please check your CSV format.","error"),!1)}(e)){W("Validating data structure...","processing");const n=function(n){return console.log("=== CSV Transformation Debug ==="),console.log("CSV Headers found:",n.headers),console.log("First row data:",n.data[0]),n.data.map((n,e)=>{console.log(`\n--- Processing Student ${e+1} ---`),console.log("Raw row data:",n),console.log("ID:",n.ID),console.log("Name:",n.Name),console.log("Kindergarten:",n.Kindergarten),console.log("Week1_Score:",n.Week1_Score),console.log("Average_Exercise_Score:",n.Average_Exercise_Score),console.log("Parent_Time_Per_Week_Minutes:",n.Parent_Time_Per_Week_Minutes),console.log("Week1_Attempts:",n.Week1_Attempts);const t=[parseInt(n.Week1_Score)||0,parseInt(n.Week2_Score)||0,parseInt(n.Week3_Score)||0,parseInt(n.Week4_Score)||0,parseInt(n.Week5_Score)||0,parseInt(n.Week6_Score)||0,parseInt(n.Week7_Score)||0,parseInt(n.Week8_Score)||0],o=t.reduce((n,e)=>n+e,0)/t.length,r={id:n.ID||(e+1).toString(),name:n.Name,kindergarten:n.Kindergarten,exerciseScores:t,averageExerciseScore:parseFloat(n.Average_Exercise_Score)||o,parentTimePerWeek:parseInt(n.Parent_Time_Per_Week_Minutes)||0,learningAreas:{"Alphabet Recognition":Math.round(.9*o),"Sight Word Recognition":Math.round(.85*o),Vocabulary:Math.round(.95*o),"Point and Read":Math.round(.88*o),"Phonemic Awareness":Math.round(.82*o)},attemptsPerWeek:[parseInt(n.Week1_Attempts)||0,parseInt(n.Week2_Attempts)||0,parseInt(n.Week3_Attempts)||0,parseInt(n.Week4_Attempts)||0,parseInt(n.Week5_Attempts)||0,parseInt(n.Week6_Attempts)||0,parseInt(n.Week7_Attempts)||0,parseInt(n.Week8_Attempts)||0]};return console.log("Transformed student:",r),r})}(e);W("Importing data...","processing"),async function(n){console.log("=== Starting dashboard update ==="),console.log("New students data:",n),console.log("Students count:",n.length),console.log("First student sample:",n[0]);try{const e={students:n};console.log("Request payload:",e),console.log("Payload JSON:",JSON.stringify(e)),console.log("Sending request to:",`${y}/students/update`);const t=await fetch(`${y}/students/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("Update response status:",t.status),console.log("Update response ok:",t.ok),!t.ok){const n=await t.text();throw console.error("Update response error:",n),new Error(`Backend update failed: ${t.status} ${n}`)}const o=await t.json();console.log("Backend update result:",o),console.log("Backend data updated successfully"),window.students=n,b=n,console.log("Local students array updated, count:",b.length),console.log("Fetching fresh insights...");const r=await fetch(`${y}/insights`);if(console.log("Insights response status:",r.status),r.ok)w=await r.json(),console.log("Fresh insights fetched:",w);else{console.error("Failed to fetch insights:",r.status);const n=await r.text();console.error("Insights error text:",n)}console.log("Re-rendering dashboard components..."),$(),I(),A(),S(),z("CSV data imported successfully! Dashboard updated with "+n.length+" students.","success"),console.log("=== Dashboard update completed successfully ==="),console.log("Final students count:",b.length)}catch(n){console.error("=== Error updating dashboard ==="),console.error("Error details:",n),console.error("Error message:",n.message),console.error("Error stack:",n.stack),z("Error updating dashboard: "+n.message,"error")}}(n),W("Data imported successfully! Dashboard updated.","success"),document.getElementById("fileInput").value=""}else W("Invalid CSV structure. Please check your file format.","error")}catch(n){console.error("Error processing CSV:",n),W("Error processing CSV file. Please try again.","error")}},e.readAsText(n)}function W(n,e="processing"){const t=document.getElementById("importStatus");document.getElementById("statusMessage").textContent=n,t.style.display="block",t.className=`import-status status-${e}`,"success"===e&&setTimeout(()=>{t.style.display="none"},3e3)}window.viewStudentDetails=function(n){const e=b.find(e=>e.id===n);e&&alert(`Student Details:\nName: ${e.name}\nKindergarten: ${e.kindergarten}\nAverage Score: ${e.averageExerciseScore.toFixed(1)}`)},window.editFeedback=function(n){const e=x.find(e=>e.id===n);e&&(document.getElementById("feedbackSubmissionId").value=n,document.getElementById("feedbackScore").value=e.score||"",document.getElementById("feedbackText").value=e.feedback||"",document.getElementById("feedbackModal").style.display="block")},window.viewStudentSubmissions=function(n){const e=b.find(e=>e.id===n),t=x.filter(e=>e.studentId===n);e&&t.length>0&&function(n,e){const t=document.getElementById("studentSubmissionsModal");t&&t.remove();const o=`\n        <div id="studentSubmissionsModal" class="modal">\n            <div class="modal-content wide-modal">\n                <div class="modal-header">\n                    <h3>${n.name} - All Homework Submissions</h3>\n                    <span class="close">&times;</span>\n                </div>\n                <div class="modal-body">\n                    <div class="student-info">\n                        <p><strong>Kindergarten:</strong> ${n.kindergarten}</p>\n                        <p><strong>Total Submissions:</strong> ${e.length}</p>\n                    </div>\n                    <div class="submissions-list">\n                        ${e.map(n=>`\n                            <div class="submission-item">\n                                <div class="submission-header">\n                                    <span class="submission-type ${n.type}">${n.type}</span>\n                                    <span class="submission-date">${new Date(n.submittedAt).toLocaleDateString()}</span>\n                                </div>\n                                <div class="submission-content">\n                                    <p><strong>Content:</strong> ${n.content}</p>\n                                    ${n.score?`<p><strong>Score:</strong> ${n.score}/100</p>`:"<p><strong>Score:</strong> <em>Pending</em></p>"}\n                                    ${n.feedback?`<p><strong>Feedback:</strong> ${n.feedback}</p>`:"<p><strong>Feedback:</strong> <em>None</em></p>"}\n                                </div>\n                                <div class="submission-actions">\n                                    <button class="btn btn-sm btn-primary" onclick="editFeedback('${n.id}')">\n                                        <i class="fas fa-edit"></i>\n                                        ${n.score?"Edit":"Add"} Feedback\n                                    </button>\n                                </div>\n                            </div>\n                        `).join("")}\n                    </div>\n                </div>\n            </div>\n        </div>\n    `;document.body.insertAdjacentHTML("beforeend",o);const r=document.getElementById("studentSubmissionsModal");r.style.display="block",r.querySelector(".close").addEventListener("click",()=>{k("studentSubmissionsModal")}),r.addEventListener("click",n=>{n.target===r&&k("studentSubmissionsModal")});const a=n=>{"Escape"===n.key&&(k("studentSubmissionsModal"),document.removeEventListener("keydown",a))};document.addEventListener("keydown",a)}(e,t)}})();